!function(R){"use strict";R.fn.jQCloud=function(v,x){function e(){for(var e=0;e<v.length;e++)v[e].weight=parseFloat(v[e].weight,10);function i(e,t){var i,h=y+"_word_"+e,n=6.28*Math.random(),o=0,r=0,a=0,s=5,d="";if(t.html=R.extend(t.html,{id:h}),t.html&&t.html.class&&(d=t.html.class,delete t.html.class),v[0].weight>v[v.length-1].weight&&(s=Math.round((t.weight-v[v.length-1].weight)/(v[0].weight-v[v.length-1].weight)*9)+1),i=R("<span>").attr(t.html).addClass("w"+s+" "+d),h=t.link?("string"==typeof t.link&&(t.link={href:t.link}),x.encodeURI&&(t.link=R.extend(t.link,{href:encodeURI(t.link.href).replace(/'/g,"%27")})),R("<a>").attr(t.link).text(t.text)):t.text,i.append(h),t.handlers)for(var f in t.handlers)t.handlers.hasOwnProperty(f)&&"function"==typeof t.handlers[f]&&R(i).bind(f,t.handlers[f]);k.append(i);var l=i.width(),c=i.height(),g=x.center.x-l/2,u=x.center.y-c/2,w=i[0].style;for(w.position="absolute",w.left=g+"px",w.top=u+"px";function(e,t){for(var i,h,n=0,n=0;n<t.length;n++)if(i=e,h=t[n],Math.abs(2*i.offsetLeft+i.offsetWidth-2*h.offsetLeft-h.offsetWidth)<i.offsetWidth+h.offsetWidth&&Math.abs(2*i.offsetTop+i.offsetHeight-2*h.offsetTop-h.offsetHeight)<i.offsetHeight+h.offsetHeight)return!0;return!1}(i[0],m);){if("rectangular"===x.shape)switch(++r*p>(1+Math.floor(a/2))*p*(a%4%2==0?1:M)&&(r=0,a++),a%4){case 1:g+=p*M+2*Math.random();break;case 2:u-=p+2*Math.random();break;case 3:g-=p*M+2*Math.random();break;case 0:u+=p+2*Math.random()}else o+=p,n+=(e%2==0?1:-1)*p,g=x.center.x-l/2+o*Math.cos(n)*M,u=x.center.y+o*Math.sin(n)-c/2;w.left=g+"px",w.top=u+"px"}x.removeOverflowing&&(g<0||u<0||g+l>x.width||u+c>x.height)?i.remove():(m.push(i[0]),R.isFunction(t.afterWordRender)&&t.afterWordRender.call(i))}v.sort(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0});var p="rectangular"===x.shape?18:2,m=[],M=x.width/x.height;x.delayedMode?function e(t){t=t||0,k.is(":visible")?t<v.length?(i(t,v[t]),setTimeout(function(){e(t+1)},10)):R.isFunction(x.afterCloudRender)&&x.afterCloudRender.call(k):setTimeout(function(){e(t)},10)}():(R.each(v,i),R.isFunction(x.afterCloudRender)&&x.afterCloudRender.call(k))}var k=this,y=k.attr("id")||Math.floor(1e6*Math.random()).toString(36),t={width:k.width(),height:k.height(),center:{x:(x&&x.width?x.width:k.width())/2,y:(x&&x.height?x.height:k.height())/2},delayedMode:50<v.length,shape:!1,encodeURI:!0,removeOverflowing:!0};return x=R.extend(t,x||{}),k.addClass("jqcloud").width(x.width).height(x.height),"static"===k.css("position")&&k.css("position","relative"),setTimeout(function(){e()},10),k}}(jQuery);