!function(R){"use strict";R.fn.jQCloud=function(v,x){var k=this,y=k.attr("id")||Math.floor(1e6*Math.random()).toString(36),e={width:k.width(),height:k.height(),center:{x:(x&&x.width?x.width:k.width())/2,y:(x&&x.height?x.height:k.height())/2},delayedMode:50<v.length,shape:!1,encodeURI:!0,removeOverflowing:!0};return x=R.extend(e,x||{}),k.addClass("jqcloud").width(x.width).height(x.height),"static"===k.css("position")&&k.css("position","relative"),setTimeout(function(){for(var e=0;e<v.length;e++)v[e].weight=parseFloat(v[e].weight,10);function h(e,t){var h,i=y+"_word_"+e,n=6.28*Math.random(),a=0,o=0,r=0,s=5,d="";if(t.html=R.extend(t.html,{id:i}),t.html&&t.html.class&&(d=t.html.class,delete t.html.class),v[0].weight>v[v.length-1].weight&&(s=Math.round((t.weight-v[v.length-1].weight)/(v[0].weight-v[v.length-1].weight)*9)+1),h=R("<span>").attr(t.html).addClass("w"+s+" "+d),i=t.link?("string"==typeof t.link&&(t.link={href:t.link}),x.encodeURI&&(t.link=R.extend(t.link,{href:encodeURI(t.link.href).replace(/'/g,"%27")})),R("<a>").attr(t.link).text(t.text)):t.text,h.append(i),t.handlers)for(var l in t.handlers)t.handlers.hasOwnProperty(l)&&"function"==typeof t.handlers[l]&&R(h).bind(l,t.handlers[l]);k.append(h);var f=h.width(),c=h.height(),g=x.center.x-f/2,u=x.center.y-c/2,w=h[0].style;for(w.position="absolute",w.left=g+"px",w.top=u+"px";function(e,t){for(var h,i,n=0,n=0;n<t.length;n++)if(h=e,i=t[n],Math.abs(2*h.offsetLeft+h.offsetWidth-2*i.offsetLeft-i.offsetWidth)<h.offsetWidth+i.offsetWidth&&Math.abs(2*h.offsetTop+h.offsetHeight-2*i.offsetTop-i.offsetHeight)<h.offsetHeight+i.offsetHeight)return 1}(h[0],m);){if("rectangular"===x.shape)switch(++o*p>(1+Math.floor(r/2))*p*(r%4%2==0?1:M)&&(o=0,r++),r%4){case 1:g+=p*M+2*Math.random();break;case 2:u-=p+2*Math.random();break;case 3:g-=p*M+2*Math.random();break;case 0:u+=p+2*Math.random()}else a+=p,n+=(e%2==0?1:-1)*p,g=x.center.x-f/2+a*Math.cos(n)*M,u=x.center.y+a*Math.sin(n)-c/2;w.left=g+"px",w.top=u+"px"}x.removeOverflowing&&(g<0||u<0||g+f>x.width||u+c>x.height)?h.remove():(m.push(h[0]),R.isFunction(t.afterWordRender)&&t.afterWordRender.call(h))}v.sort(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0});var p="rectangular"===x.shape?18:2,m=[],M=x.width/x.height;x.delayedMode?function e(t){t=t||0,k.is(":visible")?t<v.length?(h(t,v[t]),setTimeout(function(){e(t+1)},10)):R.isFunction(x.afterCloudRender)&&x.afterCloudRender.call(k):setTimeout(function(){e(t)},10)}():(R.each(v,h),R.isFunction(x.afterCloudRender)&&x.afterCloudRender.call(k))},10),k}}(jQuery);